"use strict";$(function(){function e(){$.ajax({url:"http://127.0.0.1:3000/cards",type:"GET"}).done(function(e){if(h++,e=c(e,t.length),t=t.concat(e),e.length>0){s=$(".c-cards-holder").masonry(r),d=!0;var i=e.map(function(e){return n(e)});s.append(i).masonry("appended",i).masonry("reloadItems")}else d&&(s.masonry("destroy"),d=!1)})}function i(e,i){return 0==e.index()&&i==$(".c-header").height()}function o(e){var i=$("body");e.index()>0?(i.addClass("hidden-header"),i.addClass("hidden-footer"),e.index()==$(".c-section").length-1&&i.removeClass("hidden-footer")):(i.addClass("hidden-footer"),i.removeClass("hidden-header"))}function c(e,i){return e.map(function(e,o){return e.id="card-"+(i+o+1),e})}function n(e){var i=e.imgHeight/e.imgWidth;return $("<div class='c-card' id='"+e.id+"'><div class='c-card__image'"+("style='background-image: url("+e.img+");'>")+"<div class='c-card__image_embedded'"+("style='padding-top: "+(i?100*i+"%":"100%")+";'></div></div>")+"<div class='c-card__description'>"+("<div class='c-card__name'>"+e.name+"</div></div></div>")).get(0)}var d=!1,s=void 0,t=[],r={itemSelector:".c-card",columnWidth:".c-card__sizer",percentPosition:!0},a={dots:!1,arrows:!1,infinite:!1,vertical:!1,speed:800,fade:!0,cssEase:"linear"},l={dots:!0,arrows:!0,infinite:!1,vertical:!1,speed:800,slidesToShow:4,slidesToScroll:4,cssEase:"linear"},h=1;$("body").addClass("hidden-footer").animate({scrollTop:$(".c-header").height()},500),$(".c-section-container").slick(a),$(".c-bloggers-wrapper").slick(l),e(),$("#more-cards").click(e),$(window).on("mousewheel DOMMouseScroll MozMousePixelScroll",function(e){var c=$(".c-section-container"),n=$(".c-section.slick-active"),d=n.find(".c-section__content"),s=parseInt(e.originalEvent.wheelDelta||-e.originalEvent.detail)>=0,t=Math.floor(d.height()-n.height()),r=n.offset().top-$(document).scrollTop();if(s)if(n.index()>0){if(0==d.offset().top){var a=c.slick("slickCurrentSlide");c.slick("slickGoTo",a-1)}}else n.find(".c-section__box").scrollTop()<=0&&i(n,r)&&(e.preventDefault(),$("body").animate({scrollTop:0},500));else{if(r>0)return e.preventDefault(),void $("body").animate({scrollTop:$(".c-header").height()},500);if((t<=n.find(".c-section__box").scrollTop()||t<0)&&n.index()<$(".c-section").length){var l=c.slick("slickCurrentSlide");c.slick("slickGoTo",l+1)}}o($(".c-section.slick-active"))})});
//# sourceMappingURL=../javascripts/common.js.map
