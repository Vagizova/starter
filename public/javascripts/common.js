"use strict";$(function(){function e(){$.ajax({url:"http://127.0.0.1:3000/cards",type:"GET"}).done(function(e){if(p++,e=r(e,n.length),n=n.concat(e),e.length>0){t=$(".c-cards-holder").masonry(a),s=!0;var o=e.map(function(e){return c(e)});t.append(o).masonry("appended",o).masonry("reloadItems")}else s&&(t.masonry("destroy"),s=!1)})}function o(e){return e.length>g&&(e=e.substring(0,g)+" ..."),e}function i(e){var o=$("body");e.index()>0?(o.addClass("hidden-footer"),e.index()==$(".c-section").length-1&&o.removeClass("hidden-footer")):o.addClass("hidden-footer")}function r(e,o){return e.map(function(e,i){return e.id="card-"+(o+i+1),e})}function c(e){var i=e.imgHeight/e.imgWidth;return $("<div class='c-card' id='"+e.id+"'><div class='c-card__image'"+("style='background-image: url("+e.img+");'>")+"<div class='c-card__image_embedded'"+("style='padding-top: "+(i?100*i+"%":"100%")+";'></div></div>")+"<div class='c-card__about'>"+("<div class='c-card__name'>"+e.name+' <span class="c-card__last-name">'+e.lastName+"</span></div>")+('<div class="c-card__description">'+o(e.description)+"</div></div></div>")).get(0)}var s=!1,t=void 0,n=[],a={itemSelector:".c-card",columnWidth:".c-card__sizer",percentPosition:!0},l={dots:!1,arrows:!1,infinite:!1,vertical:!1,speed:800,fade:!0,cssEase:"linear"},d={dots:!0,arrows:!0,infinite:!1,vertical:!1,speed:800,slidesToShow:4,slidesToScroll:4,appendArrows:$(".c-bloggers-wrapper").parents(".c-section__content"),nextArrow:'<div class="slick-next slick-arrow c-bloggers-wrapper__arrow c-bloggers-wrapper__next"></div>',prevArrow:'<div class="slick-prev slick-arrow c-bloggers-wrapper__arrow c-bloggers-wrapper__prev"></div>',dotsClass:"slick-dots c-bloggers-wrapper__dots"},p=1,g=85;$("body").addClass("hidden-footer").animate({scrollTop:$(".c-header").height()},500),$(".c-section-container").slick(l),$(".c-bloggers-wrapper").slick(d),e(),$("#more-cards").click(e),$(window).on("mousewheel DOMMouseScroll MozMousePixelScroll",function(e){var o=$(".c-section-container"),r=$(".c-section.slick-active"),c=r.find(".c-section__content"),s=parseInt(e.originalEvent.wheelDelta||-e.originalEvent.detail)>=0,t=Math.floor(c.height()-r.height()),n=r.offset().top-$(document).scrollTop();if(s)if(r.index()>0){if(c.offset().top==$(".c-header").height()){e.preventDefault();var a=o.slick("slickCurrentSlide");o.slick("slickGoTo",a-1)}r.index()==$(".c-section").length-1&&n==$(".c-footer").height()*-1&&$("body").animate({scrollTop:$(document).scrollTop()-$(".c-footer").height()},500)}else r.find(".c-section__box").scrollTop()<=0&&(e.preventDefault(),$("body").animate({scrollTop:0},500));else{if(n>0)return e.preventDefault(),void $("body").animate({scrollTop:$(".c-header").height()},500);if(t<=r.find(".c-section__box").scrollTop()||t<0){if(r.index()<$(".c-section").length){var l=o.slick("slickCurrentSlide");o.slick("slickGoTo",l+1)}}else r.index()==$(".c-section").length-1&&console.log($(".c-footer").offset().top-$(window).scrollTop())}i($(".c-section.slick-active"))})});
//# sourceMappingURL=../javascripts/common.js.map
