"use strict";$(function(){function e(){$.ajax({url:"http://10.66.80.80:3000/cards",type:"GET"}).done(function(e){if(a++,e=i(e,r.length),r=r.concat(e),e.length>0){t=$(".c-cards-holder").masonry(o),n=!0;var s=e.map(function(e){return c(e)});t.append(s).masonry("appended",s).masonry("reloadItems")}else n&&(t.masonry("destroy"),n=!1)})}function i(e,i){return e.map(function(e,c){return e.id="card-"+(i+c+1),e})}function c(e){var i=e.imgHeight/e.imgWidth;return $("<div class='c-card' id='"+e.id+"'><div class='c-card__image'"+("style='background-image: url("+e.img+");'>")+"<div \nclass='c-card__image_embedded'"+("style='padding-top: "+(i?100*i+"%":"100%")+";'></div></div>")+"<div class='c-card__description'>"+("<div class='c-card__name'>"+e.name+"</div></div></div>")).get(0)}var n=!1,t=void 0,r=[],o={itemSelector:".c-card",columnWidth:".c-card__sizer",percentPosition:!0,gutter:".c-card__gutter"},s={dots:!1,arrows:!1,infinite:!1,vertical:!1,speed:800,fade:!0,cssEase:"linear"},a=1;$("body").animate({scrollTop:$(".c-header").height()},500),$(".c-section-container").slick(s),e(),$("#more-cards").click(e),$(window).on("mousewheel DOMMouseScroll MozMousePixelScroll",function(e){var i=$(".c-section-container"),c=$(e.target).parents(".c-section"),n=c.find(".c-section__content"),t=parseInt(e.originalEvent.wheelDelta||-e.originalEvent.detail)>=0;if(t){if(0==c.find(".c-section__content").scrollTop()&&c.index()>0){var r=i.slick("slickCurrentSlide");i.slick("slickGoTo",r-1)}}else{var o=Math.floor(n.height()-c.height()),s=c.offset().top-$(document).scrollTop();if(s>0)c.addClass("prevent-scroll");else if(c.removeClass("prevent-scroll"),(o<=c.find(".c-section__box").scrollTop()||o<0)&&c.index()<$(".c-section").length){var a=i.slick("slickCurrentSlide");i.slick("slickGoTo",a+1)}}})});
//# sourceMappingURL=../javascripts/common.js.map
