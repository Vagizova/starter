{"version":3,"sources":["common.js"],"names":["$","getCards","ajax","url","type","done","cards","cardsPagesCount","assignId","cardsArray","length","concat","cardsLoader","masonry","masonryConfig","isMasonryCreated","newCards","map","card","createCard","append","reduceText","string","visibleSymbols","substring","lastIndex","index","id","heightCoefficient","imgHeight","imgWidth","img","name","lastName","description","get","itemSelector","columnWidth","percentPosition","bloggerConfig","dots","arrows","infinite","vertical","speed","slidesToShow","slidesToScroll","appendArrows","parents","nextArrow","prevArrow","dotsClass","dreamersConfig","centerMode","addClass","animate","scrollTop","height","slick","click","sections","find","currentSection","window","on","event","isScrolledUp","parseInt","originalEvent","wheelDelta","detail","eq","position","top","preventDefault","offset","section","content","console","log"],"mappings":"AAAA,YAAAA,GAAE,WAwKE,QAASC,KACLD,EAAEE,MACEC,IAAK,gCACLC,KAAM,QACPC,KAAK,SAACC,GAIL,GAHAC,IACAD,EAAQE,EAASF,EAAOG,EAAWC,QACnCD,EAAaA,EAAWE,OAAOL,GAC3BA,EAAMI,OAAS,EAAG,CAClBE,EAAcZ,EAAE,mBAAmBa,QAAQC,GAC3CC,GAAmB,CACnB,IAAIC,GAAWV,EAAMW,IAAI,SAACC,GACtB,MAAOC,GAAWD,IAEtBN,GAAYQ,OAAOJ,GAAUH,QAAQ,WAAYG,GAAUH,QAAQ,mBAE/DE,KACAH,EAAYC,QAAQ,WACpBE,GAAmB,KAMnC,QAASM,GAAWC,GAIhB,MAHIA,GAAOZ,OAASa,IAChBD,EAASA,EAAOE,UAAU,EAAGD,GAAkB,QAE5CD,EAyBX,QAASd,GAASF,EAAOmB,GACrB,MAAOnB,GAAMW,IAAI,SAACC,EAAMQ,GAEpB,MADAR,GAAKS,GAAK,SAAWF,EAAYC,EAAQ,GAClCR,IAIf,QAASC,GAAWD,GAChB,GAAIU,GAAoBV,EAAKW,UAAYX,EAAKY,QAC9C,OAAO9B,GACH,2BAA2BkB,EAAKS,GAAhC,gCAAA,gCAEgCT,EAAKa,IAFrC,QAAA,uCAAA,wBAIuBH,EAAoB,IAAMA,EAAoB,IAAM,QAJ3E,mBAAA,+BAAA,6BAM6BV,EAAKc,KANlC,oCAM0Ed,EAAKe,SAN/E,kBAAA,oCAOoCZ,EAAWH,EAAKgB,aAPpD,uBAQFC,IAAI,GA9OV,GAAIpB,IAAmB,EACnBH,EAAAA,OACAH,KACAK,GACAsB,aAAc,UACdC,YAAa,iBACbC,iBAAiB,GAYjBC,GACAC,MAAM,EAENC,QAAQ,EACRC,UAAU,EACVC,UAAU,EACVC,MAAO,IACPC,aAAc,EACdC,eAAgB,EAChBC,aAAc/C,EAAE,eAAegD,QAAQ,uBACvCC,UAAW,gFACXC,UAAW,gFACXC,UAAW,+BAEXC,GACAZ,MAAM,EACNa,YAAY,EACZZ,QAAQ,EACRC,UAAU,EACVE,MAAO,IACPC,aAAc,EACdE,aAAc/C,EAAE,eAAegD,QAAQ,uBACvCC,UAAW,gFACXC,UAAW,iFAEX3C,EAAkB,EAEhBgB,EAAiB,EACvBvB,GAAE,QAAQsD,SAAS,iBACnBtD,EAAE,QAAQsD,SAAS,iBAAiBC,SAChCC,UAAWxD,EAAE,aAAayD,UAC3B,KAGHzD,EAAE,eAAe0D,MAAMnB,GACvBtC,IACAD,EAAE,eAAe2D,MAAM1D,GACvBD,EAAE,eAAe0D,MAAMN,EAEvB,IAAIQ,GAAW5D,EAAE,wBAAwB6D,KAAK,cAC1CC,EAAAA,MAEAA,GADA9D,EAAE+D,QAAQP,YAAc,EACP,EAEA,EAErBxD,EAAE+D,QAAQC,GAAG,gDAAiD,SAACC,GAC3D,GAAIC,GAAeC,SAASF,EAAMG,cAAcC,aAAeJ,EAAMG,cAAcE,SAAW,CAC9F,IAAIJ,EACyE,GAAtEN,EAASW,GAAGT,GAAgBD,KAAK,mBAAmBW,WAAWC,MAC/DR,EAAMS,iBACFZ,EAAiB,GACjB9D,EAAE+D,QAAQR,SACNC,UAAWI,EAASW,GAAGT,EAAiB,GAAGa,SAASF,KACrD,UAGP,CACH,GAAIG,GAAUhB,EAASW,GAAGT,GACtBe,EAAUD,EAAQf,KAAK,kBACvBgB,GAAQL,WAAWC,KAAOG,EAAQnB,SAAWoB,EAAQpB,WACtDQ,EAAMS,iBACFZ,EAAiBF,EAASlD,SAC1BoE,QAAQC,IAAInB,EAASW,GAAGT,EAAiB,GAAGa,SAASF,KACrDzE,EAAE,QAAQuD,SACNC,UAAWI,EAASW,GAAGT,GAAgBa,SAASF,KACjD,KACHX","file":"../sources/common.js","sourcesContent":["$(function() {\n    let isMasonryCreated = false;\n    let cardsLoader;\n    let cardsArray = [];\n    let masonryConfig = {\n        itemSelector: '.c-card',\n        columnWidth: '.c-card__sizer',\n        percentPosition: true,\n        // gutter: '.c-card__gutter'\n    };\n    let slickConfig = {\n        dots: false,\n        arrows: false,\n        infinite: false,\n        vertical: false,\n        speed: 800,\n        fade: true,\n        cssEase: 'linear'\n    };\n    let bloggerConfig = {\n        dots: true,\n        // centerMode: true,\n        arrows: true,\n        infinite: false,\n        vertical: false,\n        speed: 800,\n        slidesToShow: 4,\n        slidesToScroll: 4,\n        appendArrows: $('.c-bloggers').parents('.c-section__content'),\n        nextArrow: '<div class=\"slick-next slick-arrow c-bloggers__arrow c-bloggers__next\"></div>',\n        prevArrow: '<div class=\"slick-prev slick-arrow c-bloggers__arrow c-bloggers__prev\"></div>',\n        dotsClass: 'slick-dots c-bloggers__dots'\n    }\n    let dreamersConfig = {\n        dots: false,\n        centerMode: false,\n        arrows: true,\n        infinite: false,\n        speed: 500,\n        slidesToShow: 5,\n        appendArrows: $('.c-dreamers').parents('.c-section__content'),\n        nextArrow: '<div class=\"slick-next slick-arrow c-bloggers__arrow c-bloggers__next\"></div>',\n        prevArrow: '<div class=\"slick-prev slick-arrow c-bloggers__arrow c-bloggers__prev\"></div>'\n    }\n    let cardsPagesCount = 1;\n\n    const visibleSymbols = 85;\n    $('body').addClass('hidden-footer');\n    $('body').addClass('hidden-footer').animate({\n        scrollTop: $('.c-header').height()\n    }, 500);\n\n    // $('.c-section-container').slick(slickConfig);\n    $('.c-bloggers').slick(bloggerConfig);\n    getCards();\n    $('#more-cards').click(getCards);\n    $('.c-dreamers').slick(dreamersConfig);\n\n    let sections = $('.c-section-container').find('.c-section');\n    let currentSection;\n    if ($(window).scrollTop() > 0) {\n        currentSection = 1;\n    } else {\n        currentSection = 0;\n    }\n    $(window).on('mousewheel DOMMouseScroll MozMousePixelScroll', (event) => {\n        let isScrolledUp = parseInt(event.originalEvent.wheelDelta || -event.originalEvent.detail) >= 0;\n        if (isScrolledUp) {\n           if (sections.eq(currentSection).find('.c-section__box').position().top == 0) {\n               event.preventDefault();\n               if (currentSection > 0) {\n                   $(window).animate({\n                       scrollTop: sections.eq(currentSection - 1).offset().top\n                   }, 500)\n               }\n           }\n        } else {\n            let section = sections.eq(currentSection);\n            let content = section.find('.c-section__box');\n            if (content.position().top == section.height() - content.height()) {\n               event.preventDefault();\n               if (currentSection < sections.length) {\n                   console.log(sections.eq(currentSection + 1).offset().top);\n                   $('body').animate({\n                       scrollTop: sections.eq(currentSection).offset().top\n                   }, 500);\n                   currentSection++;\n               }\n           }\n        }\n    });\n\n\n    // $(window).on('mousewheel DOMMouseScroll MozMousePixelScroll', (event) => {\n    //     let container = $('.c-section-container');\n    //     let currentSlide = $('.c-section.slick-active');\n    //     let currentContent = currentSlide.find('.c-section__content');\n    //     let isScrolledUp = parseInt(event.originalEvent.wheelDelta || -event.originalEvent.detail) >= 0;\n    //     let heightDelta = Math.floor(currentContent.height() - currentSlide.height());\n    //     let topOffset = currentSlide.offset().top - $(document).scrollTop();\n\n    //     if (isScrolledUp) {\n    //         console.log('scrolled up');\n    //         if (currentSlide.index() > 0) {\n    //             console.log('not 1 slide');\n    //             console.log(currentContent.offset().top);\n    //             console.log($('.c-header').height());\n    //             if (currentContent.offset().top == $('.c-header').height()) {\n    //                 event.preventDefault();\n    //                 let currentSlideIdx = container.slick('slickCurrentSlide');\n    //                 container.slick('slickGoTo', currentSlideIdx - 1);\n    //             }\n    //             if (currentSlide.index() == $('.c-section').length - 1) {\n    //                 console.log('last slide');\n    //                 if (topOffset == $('.c-footer').height() * -1) {\n    //                     console.log('hide footer');\n    //                     $('body').animate({\n    //                         scrollTop: $(document).scrollTop() - $('.c-footer').height()\n    //                     }, 500);\n    //                 }\n    //             }\n    //         } else {\n    //             console.log('1 slide');\n    //             if (currentSlide.find('.c-section__box').scrollTop() <= 0) {\n    //                     event.preventDefault();\n    //                     $('body').animate({\n    //                         scrollTop: 0\n    //                     }, 500);\n    //                 }\n    //         }\n    //     } else {\n    //         console.log('scrolled down');    \n    //         console.log(topOffset);        \n    //         if (topOffset > 0) {\n    //             event.preventDefault();\n    //             $('body').animate({\n    //                 scrollTop: $('.c-header').height()\n    //             }, 500);\n    //             return;\n    //         }\n    //         if (heightDelta <= currentSlide.find('.c-section__box').scrollTop() || heightDelta < 0) {\n    //             if (currentSlide.index() < $('.c-section').length - 1) {\n    //                 let currentSlideIdx = container.slick('slickCurrentSlide');\n    //                 container.slick('slickGoTo', currentSlideIdx + 1);\n    //             } else {\n    //                 console.log('footer in da house');\n    //                 event.preventDefault();\n    //                 $('body').animate({\n    //                     scrollTop: $('.c-footer').offset().top + $('.c-footer').height()\n    //                 }, 500);\n    //             }\n    //         } else {\n    //             if (currentSlide.index() == $('.c-section').length - 1) {\n    //                 console.log($('.c-footer').offset().top - $(window).scrollTop());\n    //                 if (heightDelta - 1 <= currentSlide.find('.c-section__box').scrollTop()) {\n    //                     if (currentSlide.offset().top == $('.c-header').height()) {\n    //                         event.preventDefault();\n    //                         $('body').animate({\n    //                             scrollTop: $(document).scrollTop() + $('.c-footer').height()\n    //                         }, 500);\n    //                     }\n    //                 }\n    //             };\n    //         }\n    //     }\n    //     setBorders($('.c-section.slick-active'));\n    // });\n\n    function getCards() {\n        $.ajax({\n            url: 'http://10.66.80.80:3000/cards',\n            type: 'GET'\n        }).done((cards) => {\n            cardsPagesCount++;\n            cards = assignId(cards, cardsArray.length);\n            cardsArray = cardsArray.concat(cards);\n            if (cards.length > 0) {\n                cardsLoader = $('.c-cards-holder').masonry(masonryConfig);\n                isMasonryCreated = true;\n                let newCards = cards.map((card) => {\n                    return createCard(card);\n                });\n                cardsLoader.append(newCards).masonry('appended', newCards).masonry('reloadItems');\n            } else {\n                if (isMasonryCreated) {\n                    cardsLoader.masonry('destroy');\n                    isMasonryCreated = false;\n                }\n            }\n        })\n    }\n\n    function reduceText(string) {\n        if (string.length > visibleSymbols) {\n            string = string.substring(0, visibleSymbols) + ' ...';\n        }\n        return string;\n    }\n\n    function isHeaderVisible(currentSlide, topOffset) {\n        return currentSlide.index() == 0 && topOffset == $('.c-header').height();\n    }\n\n    function isFooterVisible(currentSlide, topOffset) {\n        return currentSlide.index() == $('.c-section').length - 1 && (-1 * topOffset) == $('.c-footer').height();\n    }\n\n    function setBorders(currentSlide) {\n        let body = $('body');\n        if (currentSlide.index() > 0) {\n            // body.addClass('hidden-header');\n            body.addClass('hidden-footer');\n            if (currentSlide.index() == $('.c-section').length - 1) {\n                body.removeClass('hidden-footer');\n            }\n        } else {\n            body.addClass('hidden-footer');\n            // body.removeClass('hidden-header');\n        }\n    }\n\n    function assignId(cards, lastIndex) {\n        return cards.map((card, index) => {\n            card.id = 'card-' + (lastIndex + index + 1);\n            return card;\n        })\n    }\n\n    function createCard(card) {\n        let heightCoefficient = card.imgHeight / card.imgWidth;\n        return $(\n            `<div class='c-card' id='${card.id}'>` +\n            `<div class='c-card__image'` +\n            `style='background-image: url(${card.img});'>` +\n            `<div class='c-card__image_embedded'` +\n            `style='padding-top: ${heightCoefficient ? 100 * heightCoefficient + '%' : '100%'};'></div></div>` +\n            `<div class='c-card__about'>` +\n            `<div class='c-card__name'>${card.name} <span class=\"c-card__last-name\">${card.lastName}</span></div>` +\n            `<div class=\"c-card__description\">${reduceText(card.description)}</div></div></div>`\n        ).get(0);\n    };\n});"]}