{"version":3,"sources":["common.js"],"names":["$","getCards","ajax","url","type","done","cards","cardsPagesCount","assignId","cardsArray","length","concat","cardsLoader","masonry","masonryConfig","isMasonryCreated","newCards","map","card","createCard","append","reduceText","string","visibleSymbols","substring","lastIndex","index","id","heightCoefficient","imgHeight","imgWidth","img","name","lastName","description","get","itemSelector","columnWidth","percentPosition","bloggerConfig","dots","arrows","infinite","vertical","speed","slidesToShow","slidesToScroll","appendArrows","parents","nextArrow","prevArrow","dotsClass","dreamersConfig","centerMode","fullpage","scrollOverflow","navigation","slick","click"],"mappings":"AAAA,YAAAA,GAAE,WA0DF,QAASC,KACLD,EAAEE,MACEC,IAAK,8BACLC,KAAM,QACPC,KAAK,SAACC,GAIL,GAHAC,IACAD,EAAQE,EAASF,EAAOG,EAAWC,QACnCD,EAAaA,EAAWE,OAAOL,GAC3BA,EAAMI,OAAS,EAAG,CAClBE,EAAcZ,EAAE,mBAAmBa,QAAQC,GAC3CC,GAAmB,CACnB,IAAIC,GAAWV,EAAMW,IAAI,SAACC,GACtB,MAAOC,GAAWD,IAEtBN,GAAYQ,OAAOJ,GAAUH,QAAQ,WAAYG,GAAUH,QAAQ,mBAE/DE,KACAH,EAAYC,QAAQ,WACpBE,GAAmB,KAMnC,QAASM,GAAWC,GAIhB,MAHIA,GAAOZ,OAASa,IAChBD,EAASA,EAAOE,UAAU,EAAGD,GAAkB,QAE5CD,EAGX,QAASd,GAASF,EAAOmB,GACrB,MAAOnB,GAAMW,IAAI,SAACC,EAAMQ,GAEpB,MADAR,GAAKS,GAAK,SAAWF,EAAYC,EAAQ,GAClCR,IAIf,QAASC,GAAWD,GAChB,GAAIU,GAAoBV,EAAKW,UAAYX,EAAKY,QAC9C,OAAO9B,GACH,2BAA2BkB,EAAKS,GAAhC,gCAAA,gCAEgCT,EAAKa,IAFrC,QAAA,uCAAA,wBAIuBH,EAAoB,IAAMA,EAAoB,IAAM,QAJ3E,mBAAA,+BAAA,6BAM6BV,EAAKc,KANlC,oCAM0Ed,EAAKe,SAN/E,kBAAA,oCAOoCZ,EAAWH,EAAKgB,aAPpD,uBAQFC,IAAI,GA1GN,GAAIpB,IAAmB,EACnBH,EAAAA,OACAH,KACAK,GACAsB,aAAc,UACdC,YAAa,iBACbC,iBAAiB,GAWjBC,GACAC,MAAM,EAENC,QAAQ,EACRC,UAAU,EACVC,UAAU,EACVC,MAAO,IACPC,aAAc,EACdC,eAAgB,EAChBC,aAAc/C,EAAE,eAAegD,QAAQ,uBACvCC,UAAW,gFACXC,UAAW,gFACXC,UAAW,+BAEXC,GACAZ,MAAM,EACNa,YAAY,EACZZ,QAAQ,EACRC,UAAU,EACVE,MAAO,IACPC,aAAc,EACdE,aAAc/C,EAAE,eAAegD,QAAQ,uBACvCC,UAAW,gFACXC,UAAW,iFAEX3C,EAAkB,EAEhBgB,EAAiB,EAGvBvB,GAAE,wBAAwBsD,UACtBC,gBAAgB,EAChBC,YAAY,IAEhBxD,EAAE,eAAeyD,MAAMlB,GACvBtC,IACAD,EAAE,eAAe0D,MAAMzD,GACvBD,EAAE,eAAeyD,MAAML","file":"../sources/common.js","sourcesContent":["$(function () {\r\n    let isMasonryCreated = false;\r\n    let cardsLoader;\r\n    let cardsArray = [];\r\n    let masonryConfig = {\r\n        itemSelector: '.c-card',\r\n        columnWidth: '.c-card__sizer',\r\n        percentPosition: true\r\n    };\r\n    let slickConfig = {\r\n        dots: false,\r\n        arrows: false,\r\n        infinite: false,\r\n        vertical: false,\r\n        speed: 800,\r\n        fade: true,\r\n        cssEase: 'linear'\r\n    };\r\n    let bloggerConfig = {\r\n        dots: true,\r\n        // centerMode: true,\r\n        arrows: true,\r\n        infinite: false,\r\n        vertical: false,\r\n        speed: 800,\r\n        slidesToShow: 4,\r\n        slidesToScroll: 4,\r\n        appendArrows: $('.c-bloggers').parents('.c-section__content'),\r\n        nextArrow: '<div class=\"slick-next slick-arrow c-bloggers__arrow c-bloggers__next\"></div>',\r\n        prevArrow: '<div class=\"slick-prev slick-arrow c-bloggers__arrow c-bloggers__prev\"></div>',\r\n        dotsClass: 'slick-dots c-bloggers__dots'\r\n    }\r\n    let dreamersConfig = {\r\n        dots: false,\r\n        centerMode: false,\r\n        arrows: true,\r\n        infinite: false,\r\n        speed: 500,\r\n        slidesToShow: 5,\r\n        appendArrows: $('.c-dreamers').parents('.c-section__content'),\r\n        nextArrow: '<div class=\"slick-next slick-arrow c-bloggers__arrow c-bloggers__next\"></div>',\r\n        prevArrow: '<div class=\"slick-prev slick-arrow c-bloggers__arrow c-bloggers__prev\"></div>'\r\n    }\r\n    let cardsPagesCount = 1;\r\n\r\n    const visibleSymbols = 85;\r\n    // $('body').addClass('hidden-footer');\r\n\r\n    $('.c-section-container').fullpage({\r\n        scrollOverflow: true,\r\n        navigation: true\r\n    });\r\n    $('.c-bloggers').slick(bloggerConfig);\r\n    getCards();\r\n    $('#more-cards').click(getCards);\r\n    $('.c-dreamers').slick(dreamersConfig);\r\n\r\n\r\nfunction getCards() {\r\n    $.ajax({\r\n        url: 'http://127.0.0.1:3000/cards',\r\n        type: 'GET'\r\n    }).done((cards) => {\r\n        cardsPagesCount++;\r\n        cards = assignId(cards, cardsArray.length);\r\n        cardsArray = cardsArray.concat(cards);\r\n        if (cards.length > 0) {\r\n            cardsLoader = $('.c-cards-holder').masonry(masonryConfig);\r\n            isMasonryCreated = true;\r\n            let newCards = cards.map((card) => {\r\n                return createCard(card);\r\n            });\r\n            cardsLoader.append(newCards).masonry('appended', newCards).masonry('reloadItems');\r\n        } else {\r\n            if (isMasonryCreated) {\r\n                cardsLoader.masonry('destroy');\r\n                isMasonryCreated = false;\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction reduceText(string) {\r\n    if (string.length > visibleSymbols) {\r\n        string = string.substring(0, visibleSymbols) + ' ...';\r\n    }\r\n    return string;\r\n}\r\n\r\nfunction assignId(cards, lastIndex) {\r\n    return cards.map((card, index) => {\r\n        card.id = 'card-' + (lastIndex + index + 1);\r\n        return card;\r\n    })\r\n}\r\n\r\nfunction createCard(card) {\r\n    let heightCoefficient = card.imgHeight / card.imgWidth;\r\n    return $(\r\n        `<div class='c-card' id='${card.id}'>` +\r\n        `<div class='c-card__image'` +\r\n        `style='background-image: url(${card.img});'>` +\r\n        `<div class='c-card__image_embedded'` +\r\n        `style='padding-top: ${heightCoefficient ? 100 * heightCoefficient + '%' : '100%'};'></div></div>` +\r\n        `<div class='c-card__about'>` +\r\n        `<div class='c-card__name'>${card.name} <span class=\"c-card__last-name\">${card.lastName}</span></div>` +\r\n        `<div class=\"c-card__description\">${reduceText(card.description)}</div></div></div>`\r\n    ).get(0);\r\n};\r\n})\r\n;\r\n"]}