{"version":3,"sources":["common.js"],"names":["$","getCards","ajax","url","type","done","cards","cardsPagesCount","assignId","cardsArray","length","concat","cardsLoader","masonry","masonryConfig","isMasonryCreated","newCards","map","card","createCard","append","reduceText","string","visibleSymbols","substring","lastIndex","index","id","heightCoefficient","imgHeight","imgWidth","img","name","lastName","description","get","itemSelector","columnWidth","percentPosition","bloggerConfig","dots","arrows","infinite","vertical","speed","slidesToShow","slidesToScroll","appendArrows","parents","nextArrow","prevArrow","dotsClass","dreamersConfig","centerMode","isAnimated","animate","scrollTop","height","slick","click","sections","find","currentSection","window","on","event","isScrolledUp","parseInt","originalEvent","wheelDelta","detail","eq","position","top","preventDefault","offset","prev","section","content","console","log","next"],"mappings":"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","file":"../sources/common.js","sourcesContent":["$(function () {\r\n    let isMasonryCreated = false;\r\n    let cardsLoader;\r\n    let cardsArray = [];\r\n    let masonryConfig = {\r\n        itemSelector: '.c-card',\r\n        columnWidth: '.c-card__sizer',\r\n        percentPosition: true\r\n    };\r\n    let slickConfig = {\r\n        dots: false,\r\n        arrows: false,\r\n        infinite: false,\r\n        vertical: false,\r\n        speed: 800,\r\n        fade: true,\r\n        cssEase: 'linear'\r\n    };\r\n    let bloggerConfig = {\r\n        dots: true,\r\n        // centerMode: true,\r\n        arrows: true,\r\n        infinite: false,\r\n        vertical: false,\r\n        speed: 800,\r\n        slidesToShow: 4,\r\n        slidesToScroll: 4,\r\n        appendArrows: $('.c-bloggers').parents('.c-section__content'),\r\n        nextArrow: '<div class=\"slick-next slick-arrow c-bloggers__arrow c-bloggers__next\"></div>',\r\n        prevArrow: '<div class=\"slick-prev slick-arrow c-bloggers__arrow c-bloggers__prev\"></div>',\r\n        dotsClass: 'slick-dots c-bloggers__dots'\r\n    }\r\n    let dreamersConfig = {\r\n        dots: false,\r\n        centerMode: false,\r\n        arrows: true,\r\n        infinite: false,\r\n        speed: 500,\r\n        slidesToShow: 5,\r\n        appendArrows: $('.c-dreamers').parents('.c-section__content'),\r\n        nextArrow: '<div class=\"slick-next slick-arrow c-bloggers__arrow c-bloggers__next\"></div>',\r\n        prevArrow: '<div class=\"slick-prev slick-arrow c-bloggers__arrow c-bloggers__prev\"></div>'\r\n    }\r\n    let cardsPagesCount = 1;\r\n\r\n    const visibleSymbols = 85;\r\n    // $('body').addClass('hidden-footer');\r\n    let isAnimated = true;\r\n    $('html, body').animate({\r\n        scrollTop: $('.c-header').height()\r\n    }, 500, () => {\r\n        isAnimated = false;\r\n    });\r\n\r\n    // $('.c-section-container').slick(slickConfig);\r\n    $('.c-bloggers').slick(bloggerConfig);\r\n    getCards();\r\n    $('#more-cards').click(getCards);\r\n    $('.c-dreamers').slick(dreamersConfig);\r\n\r\n    let sections = $('.c-section-container').find('.c-section');\r\n    let currentSection;\r\n    if ($(window).scrollTop() > 0) {\r\n        currentSection = 0;\r\n    } else {\r\n        currentSection = -1;\r\n    }\r\n\r\n    $(window).on('mousewheel DOMMouseScroll MozMousePixelScroll', (event) => {\r\n        let isScrolledUp = parseInt(event.originalEvent.wheelDelta || -event.originalEvent.detail) >= 0;\r\n        if (isScrolledUp) {\r\n            if (sections.eq(currentSection).find('.c-section__content').position().top == 0) {\r\n                event.preventDefault();\r\n                if (currentSection > 0 && currentSection <= sections.length) {\r\n                    if (!isAnimated) {\r\n                        isAnimated = true;\r\n                        $('html, body').animate({\r\n                            scrollTop: sections.eq(currentSection - 1).offset().top\r\n                        }, 500, () => {\r\n                            isAnimated = false;\r\n                        });\r\n                        currentSection--;\r\n                    }\r\n                } else {\r\n                    if (!isAnimated) {\r\n                        isAnimated = true;\r\n                        $('html, body').animate({\r\n                            scrollTop: $('.c-section-container').prev().offset().top\r\n                        }, 500, () => {\r\n                            isAnimated = false;\r\n                        });\r\n                        currentSection--;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            let section = sections.eq(currentSection);\r\n            let content = section.find('.c-section__content');\r\n\r\n            if (content.position().top <= section.height() - content.height()) {\r\n                event.preventDefault();\r\n                if (currentSection < sections.length - 1) {\r\n                    if (!isAnimated) {\r\n                        isAnimated = true;\r\n                        $('html, body').animate({\r\n                            scrollTop: sections.eq(currentSection + 1).offset().top\r\n                        }, 500, () => {\r\n                            isAnimated = false;\r\n                        });\r\n                        currentSection++;\r\n                    }\r\n                } else {\r\n                    if (currentSection == sections.length - 1) {\r\n                        if (!isAnimated) {\r\n                            isAnimated = true;\r\n                            console.log($('.c-section-container').next().offset().top);\r\n                            $('html, body').animate({\r\n                                scrollTop: $('.c-section-container').next().offset().top\r\n                            }, 500, () => {\r\n                                isAnimated = false;\r\n                            });\r\n                            currentSection++;\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (currentSection == -1) {\r\n                    if (!isAnimated) {\r\n                        isAnimated = true;\r\n                        $('html, body').animate({\r\n                            scrollTop: sections.eq(0).offset().top\r\n                        }, 500, () => {\r\n                            isAnimated = false;\r\n                        });\r\n                        currentSection++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n// $(window).on('mousewheel DOMMouseScroll MozMousePixelScroll', (event) => {\r\n//     let container = $('.c-section-container');\r\n//     let currentSlide = $('.c-section.slick-active');\r\n//     let currentContent = currentSlide.find('.c-section__content');\r\n//     let isScrolledUp = parseInt(event.originalEvent.wheelDelta || -event.originalEvent.detail) >= 0;\r\n//     let heightDelta = Math.floor(currentContent.height() - currentSlide.height());\r\n//     let topOffset = currentSlide.offset().top - $(document).scrollTop();\r\n\r\n//     if (isScrolledUp) {\r\n//         console.log('scrolled up');\r\n//         if (currentSlide.index() > 0) {\r\n//             console.log('not 1 slide');\r\n//             console.log(currentContent.offset().top);\r\n//             console.log($('.c-header').height());\r\n//             if (currentContent.offset().top == $('.c-header').height()) {\r\n//                 event.preventDefault();\r\n//                 let currentSlideIdx = container.slick('slickCurrentSlide');\r\n//                 container.slick('slickGoTo', currentSlideIdx - 1);\r\n//             }\r\n//             if (currentSlide.index() == $('.c-section').length - 1) {\r\n//                 console.log('last slide');\r\n//                 if (topOffset == $('.c-footer').height() * -1) {\r\n//                     console.log('hide footer');\r\n//                     $('body').animate({\r\n//                         scrollTop: $(document).scrollTop() - $('.c-footer').height()\r\n//                     }, 500);\r\n//                 }\r\n//             }\r\n//         } else {\r\n//             console.log('1 slide');\r\n//             if (currentSlide.find('.c-section__box').scrollTop() <= 0) {\r\n//                     event.preventDefault();\r\n//                     $('body').animate({\r\n//                         scrollTop: 0\r\n//                     }, 500);\r\n//                 }\r\n//         }\r\n//     } else {\r\n//         console.log('scrolled down');\r\n//         console.log(topOffset);\r\n//         if (topOffset > 0) {\r\n//             event.preventDefault();\r\n//             $('body').animate({\r\n//                 scrollTop: $('.c-header').height()\r\n//             }, 500);\r\n//             return;\r\n//         }\r\n//         if (heightDelta <= currentSlide.find('.c-section__box').scrollTop() || heightDelta < 0) {\r\n//             if (currentSlide.index() < $('.c-section').length - 1) {\r\n//                 let currentSlideIdx = container.slick('slickCurrentSlide');\r\n//                 container.slick('slickGoTo', currentSlideIdx + 1);\r\n//             } else {\r\n//                 console.log('footer in da house');\r\n//                 event.preventDefault();\r\n//                 $('body').animate({\r\n//                     scrollTop: $('.c-footer').offset().top + $('.c-footer').height()\r\n//                 }, 500);\r\n//             }\r\n//         } else {\r\n//             if (currentSlide.index() == $('.c-section').length - 1) {\r\n//                 console.log($('.c-footer').offset().top - $(window).scrollTop());\r\n//                 if (heightDelta - 1 <= currentSlide.find('.c-section__box').scrollTop()) {\r\n//                     if (currentSlide.offset().top == $('.c-header').height()) {\r\n//                         event.preventDefault();\r\n//                         $('body').animate({\r\n//                             scrollTop: $(document).scrollTop() + $('.c-footer').height()\r\n//                         }, 500);\r\n//                     }\r\n//                 }\r\n//             };\r\n//         }\r\n//     }\r\n//     setBorders($('.c-section.slick-active'));\r\n// });\r\n\r\nfunction getCards() {\r\n    $.ajax({\r\n        url: 'http://127.0.0.1:3000/cards',\r\n        type: 'GET'\r\n    }).done((cards) => {\r\n        cardsPagesCount++;\r\n        cards = assignId(cards, cardsArray.length);\r\n        cardsArray = cardsArray.concat(cards);\r\n        if (cards.length > 0) {\r\n            cardsLoader = $('.c-cards-holder').masonry(masonryConfig);\r\n            isMasonryCreated = true;\r\n            let newCards = cards.map((card) => {\r\n                return createCard(card);\r\n            });\r\n            cardsLoader.append(newCards).masonry('appended', newCards).masonry('reloadItems');\r\n        } else {\r\n            if (isMasonryCreated) {\r\n                cardsLoader.masonry('destroy');\r\n                isMasonryCreated = false;\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction reduceText(string) {\r\n    if (string.length > visibleSymbols) {\r\n        string = string.substring(0, visibleSymbols) + ' ...';\r\n    }\r\n    return string;\r\n}\r\n\r\nfunction isHeaderVisible(currentSlide, topOffset) {\r\n    return currentSlide.index() == 0 && topOffset == $('.c-header').height();\r\n}\r\n\r\nfunction isFooterVisible(currentSlide, topOffset) {\r\n    return currentSlide.index() == $('.c-section').length - 1 && (-1 * topOffset) == $('.c-footer').height();\r\n}\r\n\r\nfunction setBorders(currentSlide) {\r\n    let body = $('body');\r\n    if (currentSlide.index() > 0) {\r\n        // body.addClass('hidden-header');\r\n        body.addClass('hidden-footer');\r\n        if (currentSlide.index() == $('.c-section').length - 1) {\r\n            body.removeClass('hidden-footer');\r\n        }\r\n    } else {\r\n        body.addClass('hidden-footer');\r\n        // body.removeClass('hidden-header');\r\n    }\r\n}\r\n\r\nfunction assignId(cards, lastIndex) {\r\n    return cards.map((card, index) => {\r\n        card.id = 'card-' + (lastIndex + index + 1);\r\n        return card;\r\n    })\r\n}\r\n\r\nfunction createCard(card) {\r\n    let heightCoefficient = card.imgHeight / card.imgWidth;\r\n    return $(\r\n        `<div class='c-card' id='${card.id}'>` +\r\n        `<div class='c-card__image'` +\r\n        `style='background-image: url(${card.img});'>` +\r\n        `<div class='c-card__image_embedded'` +\r\n        `style='padding-top: ${heightCoefficient ? 100 * heightCoefficient + '%' : '100%'};'></div></div>` +\r\n        `<div class='c-card__about'>` +\r\n        `<div class='c-card__name'>${card.name} <span class=\"c-card__last-name\">${card.lastName}</span></div>` +\r\n        `<div class=\"c-card__description\">${reduceText(card.description)}</div></div></div>`\r\n    ).get(0);\r\n};\r\n})\r\n;\r\n"]}